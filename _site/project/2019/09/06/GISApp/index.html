<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>세종창의학기제 Ⅰ,Ⅱ - SungJoon's Portfolio</title>

  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.2/css/all.css" integrity="sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns"
    crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="/assets/css/post.css" />
  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.ico" />
</head>
<body>
    


<nav id="navbar" class="navbar
  ">
  <div class="title">
    <img class="profile" src="/assets/img/profile.jpg" alt="profile"/>
    <h1 class="main-title"><a href="/">SungJoon's Portfolio</a></h1>
  </div>
  <img id="hamburger" src="/assets/img/hamburger.png">
  <div id="menu" class="menu">
    <ul class="categories">
        
          
        
          
        
          
        
          
        
          
        
          
            <li class="category">
              <a class="" href="/category/profile/">profile</a>
            </li>
          
        
          
            <li class="category">
              <a class=" active " href="/category/project/">project</a>
            </li>
          
        
          
        
          
            <li class="category">
              <a class="" href="/category/skills/">skills</a>
            </li>
          
        
          
        
          
        
    </ul>
  </div>
</nav>

    <div class="container
      
        container__post
      ">
      <div class="contents">
  <h1>세종창의학기제 Ⅰ,Ⅱ</h1>
  <p>GIS를 이용한 N명의 중간위치 측정 어플리케이션</p>

<h2 id="member">MEMBER</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: center">이름</th>
      <th style="text-align: center">역할</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">서성준</td>
      <td style="text-align: center">Android App 개발</td>
    </tr>
    <tr>
      <td style="text-align: center">남기범</td>
      <td style="text-align: center">IOS App 개발</td>
    </tr>
    <tr>
      <td style="text-align: center">천슬별</td>
      <td style="text-align: center">Hybrid App 개발</td>
    </tr>
    <tr>
      <td style="text-align: center">고정민</td>
      <td style="text-align: center">UI/UX 디자인</td>
    </tr>
  </tbody>
</table>

<h2 id="environment">ENVIRONMENT</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Language</th>
      <th style="text-align: center">Library</th>
      <th style="text-align: center">API</th>
      <th style="text-align: center">Tool</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Java / HTML5 / CSS3 / Javascript / Swift</td>
      <td style="text-align: center">JQuery / MDL / BootStrap</td>
      <td style="text-align: center">GoogleMapsAPI / GooglePlacesAPI</td>
      <td style="text-align: center">Xcode / Android Studio / Adobe illustrator / VS Code</td>
    </tr>
  </tbody>
</table>

<h2 id="기획">기획</h2>

<h3 id="n명의-사람들이-모이는-중간지점을-찾아주자">N명의 사람들이 모이는 “중간지점”을 찾아주자</h3>

<p>다른 지역에 살고 있는 N명의 사람들이 약속을 잡을 때,</p>

<p>약속 장소를 각각에게 가장 효율적이고 최저 기대비용을 가지는</p>

<p>이른바 “중간 지점”에서 모일 수 있도록 도움을 주는 프로그램(이하 어플)을 개발하자.</p>

<h2 id="서론">서론</h2>

<p>현재 남녀노소 불구하고 모두가 스마트폰 하나씩은 소지하고 있는 시대에 살고 있다.</p>

<p>한국인터넷 진흥원이 발표한 자료에 따르면, 2017년 기준 우리나라 만6세 이상 인구의 89.5%는 스마트폰을 소지하고 있다. 이처럼 대다수의 사람들이 스마트폰을 이용하고, 없어선 안 될 시대이다.</p>

<p>이로 인해 스마트폰을 스마트하게 활용하기 위한 어플리케이션(이하 어플)의 중요성 또한 커지고 있다. 
일상생활에 있어서 스마트폰에 대한 의존도가 높아졌고, 스마트폰 이용자가 주로 이용하는 어플의 종류 중, ‘내비게이션 및 지도’ 이용률이 12.5%로서, 큰 비중에 속하는 것으로 나타났다.</p>

<p>이처럼, GIS(Geometry Information Services-위치정보 서비스)는 스마트폰에서 없어서는 안 될 요소 중 하나이다. 위치정보 서비스를 기반으로 만들어진 어플을 찾아볼 수 있는데, 그 중 하나는 사용자들의 약속장소 정하기, 즉 중간좌표를 검색하여 장소를 정해주는 애플리케이션이다.</p>

<p>이러한 어플을 이용해본 결과, 단지 중간좌표만을 검색하는 데에 그쳐 실질적으로 사람들이 이용하기에 불리한 면이 많았다. 심지어, IOS 어플리케이션 시장 내에서는 위치기반 중간좌표 검색 어플이 존재하지 않았다.</p>

<p>이에 기존 어플리케이션들이 제작한 기능을 덧대어, 중간좌표 근처의 가장 가깝고, 사용자가 선택했던 원하는 장소유형을 선택하여 검색한다. 나아가 해당 지점까지 길 찾기를 수행하여 사용자들이 한 번에 이용하기 쉬운 어플을 안드로이드뿐만이 아닌 IOS로도 가능한 멀티 플랫폼을 위한 GIS 어플리케이션을 기획 및 제작하려 한다.</p>

<h2 id="관련-연구">관련 연구</h2>

<p>다른 지역에 살고 있는 N명의 사람들이 약속을 잡을 때, 약속 장소를 각각에게 가장 효율적이고 최저 기대비용을 가지는 이른바 “중간 지점”에서 모일 수 있도록 도움을 주는 프로그램을 안드로이드와 IOS플랫폼을 이용하여 개발하는 것이다.</p>

<p>단지 좌표선상  중간 값을 표시하는 것에 그치는 대신, 해당 값을 가장 인근 지하철역으로 좌표를 보정해주는 기능을 추가하여 기존 어플들과의 차별성을 둔다.</p>

<p><img src="/assets/img/project/GIS-App/near-subway.png" alt="차별성" /></p>

<p>모바일 애플리케이션을 만드는 방법은 네이티브 언어를 사용하는 방법이 대표적이지만 꼭 자바 또는 스위프트를 이용해야만 만들 수 있는 것은 아니다.</p>

<p>안드로이드와 IOS 앱을 한 번에 만들 수 있는 방법도 존재하는데, 대표적으로 코르도바를 이용한 하이브리드 앱과 C#을 이용한 자마린이 있다.</p>

<p>하이브리드 앱으로 만들 경우 구글 지도 API를 적극적으로 활용 가능하기에 GIS 기능을 손쉽게 적용할 수 있다. 하지만 하이브리드 앱의 경우 네이티브 언어로 제작한 어플리케이션보다 성능 면에서 뒤쳐지는 경우가 있다.</p>

<h2 id="system-architecture">System-Architecture</h2>

<p><img src="/assets/img/project/GIS-App/Sys-Arc.PNG" alt="시스템 구성도" /></p>

<blockquote>
  <p>※ 구글 Places API에서 JSON파싱을 통해 중간값 근처의 지하철을 검색해주는 시스템을 추가하여,</p>
</blockquote>

<p>기존 출시되어있는 어플들과의 차별성을 높임.</p>

<h2 id="타-어플과의-비교-분석">타 어플과의 비교 분석</h2>

<p>다음 표는 안드로이드 어플의 “우리어디서 만나?” 길찾기 어플과 본 논문에서 구현한 애플을 수행한 결과를 나타낸다.</p>

<p><img src="/assets/img/project/GIS-App/vs-otherapp.PNG" alt="타어플비교" /></p>

<p><img src="/assets/img/project/GIS-App/vs-otherapp2.PNG" alt="타어플비교2" /></p>

<p>기존 어플들이 단지 중간좌표만을 검색한다면, 본 논문에서 제안한 어플은 기존 어플리케이션들이 제작한 기능을 바탕으로, 중간좌표 근처의 가장 가깝고, 사용자가 선택했던 원하는 장소유형을 선택하여 검색한다. 나아가 해당 지점까지 길 찾기를 수행하는 기능까지 추가되어 있다.</p>

<h3 id="시연-예시">시연 예시</h3>

<p><img src="/assets/img/project/GIS-App/test1.png" alt="시연 예시1" /></p>

<p>약속을 잡을 인원수를 선택합니다. 최대 6명까지 가능합니다.</p>

<p><img src="/assets/img/project/GIS-App/test2.png" alt="시연 예시2" /></p>

<p>각각 인원의 위치를 설정합니다. Google Maps를 기반으로 검색 및 선택 가능합니다.</p>

<p><img src="/assets/img/project/GIS-App/test3.png" alt="시연 예시3" /></p>

<p>최종 결과물입니다. 공유하기 버튼을 이용하여 SNS메신저로 전송할 수 있습니다.</p>

<h3 id="기능-구현">기능 구현</h3>
<p><br />
제가 구현한 기능 위주로 작성하였습니다.
<br /></p>

<h2 id="c-class">C class</h2>

<p>좌표값과 입력된 사람 수는 여러 페이지에서 사용되기 때문에, 페이지 전환마다 해당 값들을 넘기는 작업이 번거롭고 비효율적이기 때문에 전역 클래스를 생성하여 해당 값들을 저장하였습니다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre><span class="c1">//C.java</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">C</span> <span class="kd">extends</span> <span class="n">Application</span><span class="o">{</span>
    <span class="kd">private</span> <span class="n">Place</span><span class="o">[]</span> <span class="n">Plc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Place</span><span class="o">[</span><span class="mi">6</span><span class="o">];</span>
    <span class="kd">private</span> <span class="n">Location</span><span class="o">[]</span> <span class="n">Loc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Location</span><span class="o">[</span><span class="mi">6</span><span class="o">];</span>
    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">is_search</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">num_textview</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span><span class="c1">//텍스트뷰의 위치</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">num_buttonclicked</span><span class="o">;</span><span class="c1">//어떤 버튼이 눌렸는지 확인</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">num_people</span><span class="o">;</span><span class="c1">//몇명의 사람인지 확인</span>
    <span class="kd">private</span> <span class="kt">boolean</span><span class="o">[]</span> <span class="n">is_peopleSearchComplete</span> <span class="o">=</span> <span class="o">{</span><span class="kc">false</span><span class="o">,</span><span class="kc">false</span><span class="o">,</span><span class="kc">false</span><span class="o">,</span><span class="kc">false</span><span class="o">,</span><span class="kc">false</span><span class="o">,</span><span class="kc">false</span><span class="o">};</span>
    <span class="kd">public</span> <span class="n">Place</span> <span class="nf">getPlc</span><span class="o">(</span><span class="kt">int</span> <span class="n">person</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">Plc</span><span class="o">[</span><span class="n">person</span><span class="o">];</span>
    <span class="o">}</span></pre></td></tr></tbody></table></code></pre></figure>

<p><br />
<br /></p>

<h2 id="google-map">Google Map</h2>

<p>위치를 검색하기 위해 구글 맵API를 사용하였고, 구글 맵뷰를 통하여 위치를 직관적으로 알 수 있게 하였습니다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="code"><pre><span class="c1">//MapViewPage.java</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MapViewPage</span> <span class="kd">extends</span> <span class="n">FragmentActivity</span> <span class="kd">implements</span> <span class="n">OnMapReadyCallback</span><span class="o">,</span><span class="n">GoogleMap</span><span class="o">.</span><span class="na">OnMapClickListener</span><span class="o">,</span> <span class="n">GoogleApiClient</span><span class="o">.</span><span class="na">OnConnectionFailedListener</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">GoogleMap</span> <span class="n">mMap</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">GoogleApiClient</span> <span class="n">mGoogleApiClient</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">TAG</span> <span class="o">=</span> <span class="s">"MapViewPage"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">LatLng</span> <span class="n">DEFAULT_LOCATION</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LatLng</span><span class="o">(</span><span class="mf">37.56</span><span class="o">,</span> <span class="mf">126.97</span><span class="o">);</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">PERMISSIONS_REQUEST_ACCESS_FINE_LOCATION</span> <span class="o">=</span> <span class="mi">2002</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">GoogleMap</span> <span class="n">googleMap</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">MapView</span> <span class="n">mapView</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">GoogleApiClient</span> <span class="n">googleApiClient</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Marker</span> <span class="n">currentMarker</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span></pre></td></tr></tbody></table></code></pre></figure>

<p>맵뷰 실행시 최초로 보여지는 위치를 서울 좌표로 설정하였습니다.
<br />
<br /></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="code"><pre><span class="c1">//MapViewPage.java</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCurrentLocation</span><span class="o">(</span><span class="n">Location</span> <span class="n">location</span><span class="o">,</span> <span class="n">String</span> <span class="n">markerTitle</span><span class="o">,</span> <span class="n">String</span> <span class="n">markerSnippet</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//장소를 검색했을때, 해당 장소에 마커를 찍음</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">currentMarker</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="n">currentMarker</span><span class="o">.</span><span class="na">remove</span><span class="o">();</span>
    <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">"Location :"</span> <span class="o">+</span> <span class="n">location</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">location</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">"setCurrentLocation: "</span><span class="o">);</span>
        <span class="c1">//현재위치의 위도 경도 가져옴</span>
        <span class="n">LatLng</span> <span class="n">currentLocation</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LatLng</span><span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">getLatitude</span><span class="o">(),</span> <span class="n">location</span><span class="o">.</span><span class="na">getLongitude</span><span class="o">());</span>
        <span class="n">MarkerOptions</span> <span class="n">markerOptions</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MarkerOptions</span><span class="o">();</span>
        <span class="n">markerOptions</span><span class="o">.</span><span class="na">position</span><span class="o">(</span><span class="n">currentLocation</span><span class="o">);</span>
        <span class="n">markerOptions</span><span class="o">.</span><span class="na">title</span><span class="o">(</span><span class="n">markerTitle</span><span class="o">);</span>
        <span class="n">markerOptions</span><span class="o">.</span><span class="na">snippet</span><span class="o">(</span><span class="n">markerSnippet</span><span class="o">);</span>
        <span class="n">markerOptions</span><span class="o">.</span><span class="na">draggable</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
        <span class="n">markerOptions</span><span class="o">.</span><span class="na">icon</span><span class="o">(</span><span class="n">BitmapDescriptorFactory</span><span class="o">.</span><span class="na">defaultMarker</span><span class="o">(</span><span class="n">BitmapDescriptorFactory</span><span class="o">.</span><span class="na">HUE_BLUE</span><span class="o">));</span>
        <span class="n">currentMarker</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">googleMap</span><span class="o">.</span><span class="na">addMarker</span><span class="o">(</span><span class="n">markerOptions</span><span class="o">);</span>
        <span class="n">currentMarker</span><span class="o">.</span><span class="na">showInfoWindow</span><span class="o">();</span><span class="c1">//누르지 않아도 정보창 띄움</span>
        <span class="k">this</span><span class="o">.</span><span class="na">googleMap</span><span class="o">.</span><span class="na">moveCamera</span><span class="o">(</span><span class="n">CameraUpdateFactory</span><span class="o">.</span><span class="na">newLatLng</span><span class="o">(</span><span class="n">currentLocation</span><span class="o">));</span>
        <span class="k">return</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">this</span><span class="o">.</span><span class="na">googleMap</span><span class="o">.</span><span class="na">moveCamera</span><span class="o">(</span><span class="n">CameraUpdateFactory</span><span class="o">.</span><span class="na">newLatLng</span><span class="o">(</span><span class="n">DEFAULT_LOCATION</span><span class="o">));</span>
<span class="o">}</span></pre></td></tr></tbody></table></code></pre></figure>

<p>PlaceAutoComplete를 이용하여 장소 검색을 한 뒤, 해당 장소에 마커를 표시하며 좌표를 저장합니다.
<br />
<br /></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="code"><pre><span class="c1">//MapViewPage.java</span>

<span class="n">Public</span> <span class="kt">void</span> <span class="nf">onMapClick</span><span class="o">(</span><span class="n">LatLng</span> <span class="n">point</span><span class="o">){</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">currentMarker</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="n">currentMarker</span><span class="o">.</span><span class="na">remove</span><span class="o">();</span>
        <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">"setClickCurrentLocation: "</span><span class="o">);</span>

        <span class="c1">//현재 위도와 경도에서 화면 포인트를 알려준다</span>
        <span class="n">Double</span> <span class="n">latitude</span> <span class="o">=</span> <span class="n">point</span><span class="o">.</span><span class="na">latitude</span><span class="o">;</span>
        <span class="n">Double</span> <span class="n">longitude</span> <span class="o">=</span> <span class="n">point</span><span class="o">.</span><span class="na">longitude</span><span class="o">;</span>


        <span class="c1">//현재 화면에 찍힌 포인트로부터 위도와 경도를 알려준다.</span>
        <span class="kd">final</span> <span class="n">LatLng</span> <span class="n">latLng</span><span class="o">=</span><span class="k">new</span> <span class="n">LatLng</span><span class="o">(</span><span class="n">latitude</span><span class="o">,</span><span class="n">longitude</span><span class="o">);</span></pre></td></tr></tbody></table></code></pre></figure>

<p>구글 Place에서 검색되지 않는 일부 장소들을 위하여 구글 맵의 특정 위치를 클릭 시, 해당 위치로 설정 및 좌표를 저장할 수 있도록 하였습니다.
<br />
<br /></p>

<h3 id="성과">성과</h3>

<p><img src="/assets/img/project/GIS-App/awards.png" alt="성과" /></p>

<p>해당 어플리케이션은 세종대학교 5회 창의설계경진대회에서 우수상을 수상하였습니다.</p>

<h3 id="contact">Contact</h3>
<p><br />
<br />
<a href="https://github.com/ehaken95/Center_Android" style="color: #5779ff" target="_blank">
<u>Android Source 바로가기</u></a></p>

<blockquote>
  <p>email : seojj95@naver.com</p>

  <p>by 서성준, 남기범, 천슬별, 고정민</p>

  <p>“본 연구는 과학기술정보통신부 및 정보통신기술진흥센터의 SW중심대학 사업의 연구결과로 수행되었음”(2015-0-00938)</p>
</blockquote>

</div>

    </div>
</body>
</html>
